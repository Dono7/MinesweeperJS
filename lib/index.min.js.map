{"version":3,"file":"index.min.js","sources":["index.min.js"],"sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Cell = /*#__PURE__*/function () {\n  function Cell() {\n    _classCallCheck(this, Cell);\n\n    this.isRevealed = false;\n    this.isBomb = false;\n    this.isFlaged = false;\n    this.nb = 0;\n  }\n\n  _createClass(Cell, [{\n    key: \"inc\",\n    value: function inc() {\n      this.nb++;\n    }\n  }, {\n    key: \"dec\",\n    value: function dec() {\n      this.nb--;\n    }\n  }, {\n    key: \"bomb\",\n    value: function bomb() {\n      this.isBomb = true;\n    }\n  }, {\n    key: \"unbomb\",\n    value: function unbomb() {\n      this.isBomb = false;\n    }\n  }, {\n    key: \"reveal\",\n    value: function reveal() {\n      this.isRevealed = true;\n      return this.nb;\n    }\n  }, {\n    key: \"toggleReveal\",\n    value: function toggleReveal() {\n      this.isRevealed = !this.isRevealed;\n    }\n  }, {\n    key: \"toggleFlag\",\n    value: function toggleFlag() {\n      this.isRevealed = !this.isRevealed;\n    }\n  }]);\n\n  return Cell;\n}();\n\nvar _default = Cell;\nexports[\"default\"] = _default;\n\n},{}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Grid = /*#__PURE__*/function () {\n  // Should handle param errors\n  // Every param is optional\n  function Grid() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref$width = _ref.width,\n        width = _ref$width === void 0 ? 9 : _ref$width,\n        _ref$height = _ref.height,\n        height = _ref$height === void 0 ? 9 : _ref$height,\n        _ref$name = _ref.name,\n        name = _ref$name === void 0 ? \"Untitled\" : _ref$name,\n        _ref$nbbombs = _ref.nbbombs,\n        nbbombs = _ref$nbbombs === void 0 ? \"10\" : _ref$nbbombs,\n        map = _ref.map;\n\n    _classCallCheck(this, Grid);\n\n    this.width = width;\n    this.height = height;\n    this.name = name;\n    this.nbbombs = nbbombs;\n    this.map = map;\n    this.areBombsSet = false;\n  }\n\n  _createClass(Grid, [{\n    key: \"initMap\",\n    value: function initMap() {\n      var _this = this;\n\n      this.map = new Array(this.height).fill(0).map(function () {\n        return new Array(_this.width).fill(0).map(function () {\n          return new Cell();\n        });\n      });\n      return this;\n    } // Assume that nbbombs is a valid nb\n\n  }, {\n    key: \"setBombs\",\n    value: function setBombs(clickedX, clickedY) {\n      var _this2 = this;\n\n      if (this.areBombsSet) return this;\n\n      var possibilities = _toConsumableArray(Array(this.width * this.height - 1).keys()),\n          clickedIndex = clickedY * this.width + clickedX,\n          bombsCoords = [],\n          tmpBombIndex; // Choose bombs coords\n\n\n      for (var i = 0; i < this.nbbombs; i++) {\n        tmpBombIndex = possibilities.splice(Math.floor(Math.random() * possibilities.length), 1)[0];\n        tmpBombIndex = tmpBombIndex == clickedIndex ? this.height * this.width : tmpBombIndex;\n        bombsCoords.push(tmpBombIndex);\n      } // Avoid bomb on the clicked cell\n\n\n      tmpBombIndex = bombsCoords.indexOf(clickedIndex);\n\n      if (tmpBombIndex > -1) {\n        bombsCoords.splice(tmpBombIndex, 1);\n        bombsCoords.push(this.width * this.height);\n      } // Add bombs into the map\n\n\n      bombsCoords.forEach(function (bombIndex) {\n        return _this2.addBomb(bombIndex);\n      });\n      this.bombsSet = true;\n      return this;\n    }\n  }, {\n    key: \"addBomb\",\n    value: function addBomb(bombIndex, y) {\n      var x = y ? bombIndex : Math.floor(bombIndex / this.height);\n      y = y ? y : bombIndex % this.width;\n\n      for (var i = x - 1; i <= x + 1; i++) {\n        for (var j = y - 1; j <= y + 1; j++) {\n          if (i >= 0 && j >= 0 && i < this.width && j < this.height && !(i == x && j == y)) {\n            this.map[i][j].inc();\n          }\n        }\n      }\n\n      this.map[x][y].bomb();\n      return this;\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      var output = \"\".concat(this.name, \" (\").concat(this.width, \"x\").concat(this.height, \", \").concat(this.nbbombs, \" bombs) \\n\");\n      this.map.forEach(function (line) {\n        line.forEach(function (c) {\n          output += c.isRevealed ? \"_\" : \"-\";\n          output += c.isBomb ? \"x \" : c.nb + \" \";\n        });\n        output += \"\\n\";\n      });\n      console.log(output);\n      return this;\n    }\n  }, {\n    key: \"reveal\",\n    value: function reveal(x, y) {\n      if (this.map[y][x].isRevealed) return;\n      var nb = this.map[y][x].reveal();\n\n      if (nb == 0) {\n        if (x > 0) this.reveal(x - 1, y);\n        if (y > 0) this.reveal(x, y - 1);\n        if (x < this.width - 1) this.reveal(x + 1, y);\n        if (y < this.height - 1) this.reveal(x, y + 1);\n      }\n    }\n  }]);\n\n  return Grid;\n}();\n\nvar _default = Grid;\nexports[\"default\"] = _default;\n\n},{}],3:[function(require,module,exports){\n\"use strict\";\n\nvar _Cell = _interopRequireDefault(require(\"./Cell.js\"));\n\nvar _Grid = _interopRequireDefault(require(\"./Grid.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nexports = {\n  Grid: _Grid[\"default\"],\n  Cell: _Cell[\"default\"]\n};\n\n},{\"./Cell.js\":1,\"./Grid.js\":2}]},{},[3]);\n"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","_defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","value","Cell","instance","Constructor","TypeError","_classCallCheck","this","isRevealed","isBomb","isFlaged","nb","protoProps","staticProps","prototype","2","_toConsumableArray","arr","Array","isArray","_arrayLikeToArray","_arrayWithoutHoles","iter","Symbol","iterator","from","_iterableToArray","minLen","toString","slice","constructor","name","test","_unsupportedIterableToArray","_nonIterableSpread","len","arr2","Grid","_ref","arguments","undefined","_ref$width","width","_ref$height","height","_ref$name","_ref$nbbombs","nbbombs","map","areBombsSet","_this","fill","clickedX","clickedY","_this2","tmpBombIndex","possibilities","keys","clickedIndex","bombsCoords","splice","Math","floor","random","push","indexOf","forEach","bombIndex","addBomb","bombsSet","y","x","j","inc","bomb","output","concat","line","console","log","reveal","3","_Cell","_interopRequireDefault","obj","__esModule","default","./Cell.js","./Grid.js"],"mappings":"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"}