{"version":3,"sources":["node_modules/browser-pack/_prelude.js","classes/Cell.js","classes/Checker.js","classes/Grid.js","classes/client.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","Cell","_classCallCheck","this","isRevealed","isBomb","isFlaged","nb","Checker","paramvalue","paramname","arguments","undefined","v","ok","msg","concat","fire","Number","isInteger","String","b","min","max","minGirdSize","maxGirdSize","Grid","_ref","_ref$width","width","_ref$height","height","_ref$name","name","_ref$nbbombs","nbbombs","between","string","notEmpty","Math","floor","areBombsSet","_this","map","Array","fill","clickedX","clickedY","_this2","_indexToCoord","indexToCoord","x","y","tmpBombIndex","possibilities","_toConsumableArray","keys","clickedIndex","bombsCoords","splice","random","push","forEach","bombIndex","addBomb","def","spawnBombs","indexX","indexY","_indexToCoord2","j","inc","bomb","reveal","bool","output","line","console","log","_indexToCoord3","required","undef","global","window","MsInstalled"],"mappings":"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","file":"client-0.3.3.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","const Checker = require(\"./Checker.js\")\n\n\nclass Cell {\n\n    constructor(){\n        this.isRevealed = false\n        this.isBomb = false\n        this.isFlaged = false\n        this.nb = 0\n    }\n\n    inc() { this.nb++ }\n    dec() { this.nb-- }\n    bomb() { this.isBomb = true }\n    unbomb() { this.isBomb = false }\n    reveal() { this.isRevealed = true ; return this.nb }\n    toggleReveal() { this.isRevealed = !this.isRevealed }\n    toggleFlag() { this.isRevealed = !this.isRevealed }\n\n}\n\n\nmodule.exports = Cell\n","class Checker {\n\n    constructor(paramvalue, paramname = ''){\n        this.n = paramname\n        this.v = paramvalue\n        this.ok = true\n        this.msg = ''\n\n        return this;\n    }\n\n    required() { \n        if(this.ok && (this.v === undefined || this.v === null) ) {\n            this.ok = false\n            this.msg = `The parameter ${this.n} is required`\n            this.fire()\n        }\n        return this;\n    }\n\n    notEmpty() {\n        if(this.ok && (this.v.length < 1 || this.v === '') ) {\n            this.ok = false\n            this.msg = `The parameter ${this.n} is required`\n            this.fire()\n        }\n        return this;\n    }\n\n    int() {\n        if(this.ok && ( ! Number.isInteger(this.v) ) ) {\n            this.ok = false\n            this.msg = `The parameter ${this.n} must be an integer`\n            this.fire()\n        }\n        return this;\n    }\n\n    string() {\n        if(this.ok && ( ! (typeof this.v === 'string' ||  this.v instanceof String ) ) ) {\n            this.ok = false\n            this.msg = `The parameter ${this.n} must be a string`\n            this.fire()\n        }\n        return this;\n    }\n\n    bool(){\n        if(this.ok && (typeof this.v !== \"boolean\")) {\n            this.ok = false\n            this.msg = `The parameter ${this.n} must be a boolean value`\n            this.fire()\n        }\n        return this;\n    }\n    \n    def() {\n        if(this.ok && ( this.v === undefined ) ) {\n            this.ok = false\n            this.msg = `The parameter ${this.n} should not be undefined`\n            this.fire()\n        }\n        return this;\n    }\n\n    undef() {\n        if(this.ok && ( this.v !== undefined ) ) {\n            this.ok = false\n            this.msg = `The parameter ${this.n} should be undefined`\n            this.fire()\n        }\n        return this;\n    }\n\n    min(i) {\n        if(this.ok && ( this.v < i  ) ) {\n            this.ok = false\n            this.msg = `The parameter ${this.n} must be greater than ${i}`\n            this.fire()\n        }\n        return this;\n    }\n\n    max(i) {\n        if(this.ok && ( this.v > i  ) ) {\n            this.ok = false\n            this.msg = `The parameter ${this.n} must be smaller than ${i}`\n            this.fire()\n        }\n        return this;\n    }\n\n    between(a,b) {\n        return this.min(a).max(b);\n    }\n\n    fire() {\n        if(! this.ok && this.msg != '') {\n            throw new Error(`[MinesweeperJS] ${this.msg}`)\n        }\n    }\n\n}\n\nmodule.exports = Checker","const Checker = require(\"./Checker.js\")\nconst Cell = require(\"./Cell.js\")\n\n\nconst minGirdSize = 9\nconst maxGirdSize = 1000\n\n\nclass Grid {\n\n    // Should handle param errors\n    // Every param is optional\n    constructor({\n        width = minGirdSize,\n        height = minGirdSize,\n        name = \"Untitled\",\n        nbbombs = 10\n        } = {}\n    ){\n        // Check parameters\n        new Checker(width,'width').int().between(minGirdSize, maxGirdSize)\n        new Checker(height,'width').int().between(minGirdSize, maxGirdSize)\n        new Checker(name,'name').string().notEmpty()\n        new Checker(nbbombs,'nbbomb').int().min(Math.max(1, Math.floor(width * height / 100)))\n\n        this.width = width\n        this.height = height\n        this.name = name\n        this.nbbombs = nbbombs\n        this.areBombsSet = false;\n    }\n\n    initMap() {\n        this.map = new Array(this.height).fill(0).map(() => new Array(this.width).fill(0).map(() => new Cell()));\n        return this;\n    }\n\n    spawnBombs(clickedX, clickedY) {\n        const {x, y} = indexToCoord(clickedX,clickedY)\n\n        if(this.areBombsSet) \n            return this;\n\n        // Create an array of possible spawn coords \n        let possibilities = [...Array(this.width * this.height - 2).keys()],\n            clickedIndex = y  * this.width + x ,\n            bombsCoords = [],\n            tmpBombIndex;\n\n        // Choose bombs coords\n        for(let i = 0 ; i < this.nbbombs ; i++) {\n            tmpBombIndex = possibilities.splice(Math.floor(Math.random()*possibilities.length),1)[0]\n            tmpBombIndex = (tmpBombIndex == clickedIndex) ? this.height * this.width - 1 : tmpBombIndex;\n            bombsCoords.push(tmpBombIndex);\n        }\n\n        // Add bombs into the map\n        bombsCoords.forEach(bombIndex => this.addBomb(bombIndex));\n\n        this.areBombsSet = true;\n        return this;\n    }\n\n    spawnRdmBombs(){\n        new Checker(this.map,'map').def()\n\n        let x = Math.floor(Math.random() * this.map.length)\n        let y = Math.floor(Math.random() * this.map[0].length)\n        return this.spawnBombs(x,y)\n    }\n\n    addBomb(indexX, indexY) {\n        const {x, y} = indexToCoord(indexX,indexY)\n        \n        for(let i = x - 1 ; i <= x + 1 ; i++) {\n            for(let j = y - 1 ; j <= y + 1 ; j++) {\n                if(i >= 0 && j >= 0 && i < this.height && j < this.width && !(i == x && j == y)) {\n                    this.map[i][j].inc()\n                }\n            }\n        }\n\n        this.map[x][y].bomb()\n        return this;\n    }\n\n    show(reveal = false) {\n        new Checker(reveal,'reveal').def().bool();\n        new Checker(this.map,'map').def()\n\n        let output = `${this.name} (${this.width}x${this.height}, ${this.nbbombs} bombs) \\n`\n        this.map.forEach( line => { \n            line.forEach(c => {\n                if(reveal) {\n                    output += c.isRevealed ? \"-\" : \" \"\n                }\n                output += c.isBomb ? \"x \" : c.nb + \" \"\n            })\n            output += \"\\n\"\n        })\n        console.log(output)\n\n        return this;\n    }\n\n    reveal(indexX, indexY) {\n        const {x, y} = indexToCoord(indexX,indexY)\n\n        if(this.map[x][y].isRevealed)\n            return;\n\n        let nb = this.map[x][y].reveal()\n\n        if(nb == 0) {\n            if(x > 0)\n                this.reveal(x-1,y)\n            if(y > 0)\n                this.reveal(x,y-1)\n            if(x < this.width - 1)\n                this.reveal(x+1,y)\n            if(y < this.height - 1)\n                this.reveal(x,y+1)\n        }\n\n        return this;\n    }\n\n    indexToCoord(indexX, indexY) {\n        new Checker(this.map,'map').def()\n        new Checker(this.width,'width').def()\n        new Checker(this.height,'height').def()\n        if(indexY !== undefined) {\n            new Checker(indexX,'indexX').required().int().between(0, this.width - 1)\n            new Checker(indexY,'indexY').required().int().between(0,this.height - 1)\n        } else {\n            new Checker(indexX,'indexX').required().int().between(0, this.height * this.width - 1)\n            new Checker(indexY,'indexY').undef()\n        }\n\n        let x = indexY ? indexX : Math.floor(indexX / this.width),\n            y = indexY ? indexY : indexX % this.width ;\n\n        return {x,y}\n    }\n}\n\nmodule.exports = Grid","\nconst Checker = require('./Checker')\nconst Cell = require('./Cell')\nconst Grid = require('./Grid') \n\nconst MsInstalled = () => console.log('MinesweeperJS is currently installed')\n\nvar global = window || global\nglobal.Checker = Checker\nglobal.Cell = Cell\nglobal.Grid = Grid\nglobal.MsInstalled = MsInstalled\n"]}